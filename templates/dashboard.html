{% extends 'base.html' %}
{% load staticfiles %}
{% block title %} Dashboard {% endblock %}

<!-- // styles // -->
{% block style %}  
.main{
	margin:5px;
	padding:5px
}
{% endblock %}

{% block Dashboardactive %} active {% endblock %}

{% block body %}
<!-- /////////////////////// body ///////////////////// -->

{% if message %}
	<script type="text/javascript">
	alert( "{{message}}" );
	</script>
{% endif %}


{% if cluster %}
<div class="main">
<h3 class="title"> Details: </h3>
<table id="mytable" class="table table-bordred table-striped table-hover">                   
	<thead>
		<th>Container Name</th>
		<th>Container IP</th>
		<th>Container Id</th>
		<th>Service Provided</th>
		<th>Status</th>  
	</thead>
	<tbody>
	    
{% for  container_name,ip_list,container_id,container_type in all_details %}  
	<tr>
	    <td>{{container_name}}</td>
	    <td>{{ip_list}}	</td>
	    <td>{{container_id}}</td>
	    <td>{{container_type}}</td>
	    <td>Running</td>
	</tr>
{% endfor %}
</tbody>
</table>

<h3 class="title"> Operations: </h3>

	<ul class="list-group">
	  <li class="list-group-item"><a href="http://172.17.0.2:50070" target="_blank">Launch Name Node Portal</a></li>
	  {% if service_type == 'nnjt_dntt' %}
	  <li class="list-group-item"><a href="http://172.17.0.2:50030" target="_blank">Launch Job Tracker Portal</a></li>
      {% endif %}
	  {% if service_type == 'nn_jt_dntt' or service_type == 'nn_jt_dn_tt' %}
	  <li class="list-group-item"><a href="http://172.17.0.3:50030" target="_blank">Launch Job Tracker Portal</a></li>
	  {% endif %}
	  <li class="list-group-item text-danger" style="cursor:pointer" data-toggle="modal" data-target="#exampleModal" >Clear whole Cluster</li>
	</ul>

</div>
{% endif %}

{% if no_cluster %}
<center><h1 class="title mt-5"> No cluster is currently running... </h1></center>
{% endif %}




<!-- Clear cluester Modal-->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Clear Cluster</h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">Ã—</span>
        </button>
      </div>
      <div class="modal-body">You are about to clear the whole cluster.</div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <a class="btn btn-primary" href="{% url 'cluster:clear_cluster' %}">Confirm</a>
      </div>
    </div>
  </div>
</div>


{% endblock %}


<!-- onclick="location.href='{% url 'cluster:clear_cluster' %}'" -->